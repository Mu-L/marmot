# Marmot v2.0 - Read-Only Replica 2A
# Follows cluster nodes for transparent failover

node_id = 102
data_dir = "/tmp/marmot-cluster/replica-2a"

[replica]
enabled = true
follow_addresses = ["localhost:8082", "localhost:8081", "localhost:8083"]
secret = "cluster-secret-key"
replicate_databases = []                     # Empty = replicate all databases
database_discovery_interval_seconds = 10     # Poll for new databases every 10s
discovery_interval_seconds = 30              # Poll for cluster membership every 30s
failover_timeout_seconds = 60                # Max time to find alive node during failover
reconnect_interval_seconds = 5               # Initial reconnect delay
reconnect_max_backoff_seconds = 30           # Max reconnect backoff
initial_sync_timeout_minutes = 30            # Timeout for initial snapshot download
snapshot_concurrency = 3                     # Parallel snapshot downloads
snapshot_cache_ttl_seconds = 30              # Snapshot cache TTL

[transaction]
heartbeat_timeout_seconds = 10
conflict_window_seconds = 10
lock_wait_timeout_seconds = 50

[cluster]
grpc_bind_address = "0.0.0.0"
grpc_port = 8092

[connection_pool]
pool_size = 4
max_idle_time_seconds = 10
max_lifetime_seconds = 300

[query_pipeline]
transpiler_cache_size = 10000
validator_pool_size = 8

[mysql]
enabled = true
bind_address = "0.0.0.0"
port = 3318
max_connections = 100

[metastore]
cache_size_mb = 64
memtable_size_mb = 64
memtable_count = 2
l0_compaction_threshold = 500
l0_stop_writes = 1000
wal_bytes_per_sync_kb = 512
wal_sync_interval_ms = 10

[logging]
verbose = true
format = "console"

[prometheus]
enabled = true
